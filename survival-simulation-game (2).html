import React, { useState } from 'react';
import { AlertCircle, Package, CheckCircle, XCircle, Info, Play, Flame, Home } from 'lucide-react';

const SurvivalSimulationGame = () => {
  const [currentPage, setCurrentPage] = useState('intro');
  const [selectedItems, setSelectedItems] = useState([]);
  const [watchedVideos, setWatchedVideos] = useState({
    fire: false,
    earthquake: false
  });

  // PDF에 맞춘 물품 리스트 (색상 구분 제거)
  const items = [
    { id: 'water', name: '생수(500ml)', size: 1, description: '깨끗한 식수 1병' },
    { id: 'food', name: '비상식량', size: 2, description: '통조림, 에너지바 등' },
    { id: 'flashlight', name: '손전등', size: 1, description: '배터리 포함' },
    { id: 'radio', name: '라디오', size: 2, description: '건전지식 휴대용 라디오' },
    { id: 'firstaid', name: '구급상자', size: 2, description: '기본 응급처치 도구' },
    { id: 'emergency_blanket', name: '비상담요', size: 1, description: '보온용 은박 담요' },
    { id: 'whistle', name: '호루라기', size: 1, description: '구조 신호용' },
    { id: 'charger', name: '충전기', size: 1, description: '휴대폰 충전기' },
    { id: 'phone', name: '스마트폰', size: 1, description: '통신 및 정보 확인용' },
    { id: 'ramen', name: '라면', size: 2, description: '간편 식사' },
    { id: 'choco', name: '초콜릿', size: 1, description: '빠른 에너지 보충' },
    { id: 'blanket', name: '이불', size: 5, description: '보온용 침구' },
    { id: 'pillow', name: '베개', size: 3, description: '편안한 수면용' },
    { id: 'game', name: '게임기', size: 3, description: '오락용' },
    { id: 'comic', name: '만화책', size: 2, description: '여가 시간용' },
    { id: 'computer', name: '컴퓨터', size: 6, description: '노트북' },
    { id: 'coffee', name: '커피메이커', size: 5, description: '커피 제조 기계' },
    { id: 'salad', name: '샐러드', size: 2, description: '신선 채소' },
    { id: 'map', name: '지도', size: 1, description: '지역 지도' },
    { id: 'hat', name: '모자', size: 1, description: '방한용' },
    { id: 'raincoat', name: '우비', size: 1, description: '방수 우의' },
    { id: 'tissue', name: '휴지', size: 1, description: '화장지' },
    { id: 'gasmask', name: '방독면', size: 2, description: '유독가스 차단용' },
    { id: 'knife', name: '칼', size: 1, description: '다목적 칼' },
    { id: 'tape', name: '테이프', size: 1, description: '다용도 테이프' },
    { id: 'lighter', name: '점화도구', size: 1, description: '라이터, 성냥' },
    { id: 'photo', name: '가족사진', size: 1, description: '가족 사진' }
  ];

  const addItemToBag = (item) => {
    const usedSpace = selectedItems.reduce((sum, i) => sum + i.size, 0);
    if (usedSpace + item.size <= 20) {
      setSelectedItems([...selectedItems, item]);
    } else {
      alert('가방에 공간이 부족합니다!');
    }
  };

  const removeOneItem = (itemId) => {
    const index = selectedItems.findIndex(item => item.id === itemId);
    if (index !== -1) {
      const newItems = [...selectedItems];
      newItems.splice(index, 1);
      setSelectedItems(newItems);
    }
  };

  // PDF 시뮬레이션 기반 점수 계산
  const calculateSurvivalScore = () => {
    let survivalScore = 8; // 시작 점수
    const inventory = selectedItems.reduce((acc, item) => {
      acc[item.id] = (acc[item.id] || 0) + 1;
      return acc;
    }, {});

    let log = ['=== 72시간 생존 시뮬레이션 ===\n시작 점수: 8점\n'];

    // 3시간 후
    log.push('\n📍 사건 발생 3시간 후');
    // 물 1병 필요
    if (inventory.water && inventory.water > 0) {
      inventory.water--;
      log.push('✅ 물 섭취 성공');
    } else {
      survivalScore--;
      log.push('❌ 물 부족 (-1점)');
    }
    
    // 식량 1개 필요
    const foods = ['food', 'ramen', 'choco'];
    let foodFound = false;
    for (const food of foods) {
      if (inventory[food] && inventory[food] > 0) {
        inventory[food]--;
        foodFound = true;
        log.push('✅ 식량 섭취 성공');
        break;
      }
    }
    if (!foodFound) {
      survivalScore--;
      log.push('❌ 식량 부족 (-1점)');
    }

    // 라디오/스마트폰으로 소식 듣기
    if (inventory.radio || inventory.phone) {
      log.push('✅ 소식 청취 - 건물이 불안정함을 앎');
    } else {
      survivalScore--;
      log.push('❌ 소식 못 들음 - 건물 붕괴 속도 증가 (-1점)');
    }

    // 7시간 후
    log.push('\n📍 사건 발생 7시간 후 - 비가 내림');
    // 체온 유지
    const warmItems = ['blanket', 'hat', 'raincoat', 'emergency_blanket'];
    let hasWarmItem = false;
    for (const item of warmItems) {
      if (inventory[item]) {
        hasWarmItem = true;
        log.push(`✅ 체온 유지 성공 (${items.find(i => i.id === item)?.name})`);
        break;
      }
    }
    if (!hasWarmItem) {
      survivalScore--;
      log.push('❌ 체온 유지 실패 (-1점)');
    }

    // 이불이 물에 젖음
    if (inventory.blanket) {
      delete inventory.blanket;
      log.push('⚠️ 이불이 물에 젖어 사용 불가');
    }

    // 구급상자 필요
    if (inventory.firstaid) {
      log.push('✅ 병 치료 성공');
    } else {
      survivalScore--;
      log.push('❌ 병 치료 실패 (-1점)');
    }

    // 15시간 후
    log.push('\n📍 사건 발생 15시간 후');
    // 점화도구
    if (inventory.lighter) {
      survivalScore++;
      log.push('✅ 불 피우기 성공 (+1점)');
    } else {
      log.push('⚪ 불 피우기 실패');
    }

    // 24시간 후
    log.push('\n📍 사건 발생 24시간 후');
    // 충전기 없으면 스마트폰 사용 불가
    if (inventory.phone && !inventory.charger) {
      delete inventory.phone;
      log.push('⚠️ 충전기 없어서 스마트폰 사용 불가');
    }
    // 샐러드 상함
    if (inventory.salad) {
      delete inventory.salad;
      log.push('⚠️ 샐러드가 상함');
    }

    // 물 1병
    if (inventory.water && inventory.water > 0) {
      inventory.water--;
      log.push('✅ 물 섭취 성공');
    } else {
      survivalScore--;
      log.push('❌ 물 부족 (-1점)');
    }
    
    // 식량 1개
    foodFound = false;
    for (const food of foods) {
      if (inventory[food] && inventory[food] > 0) {
        inventory[food]--;
        foodFound = true;
        log.push('✅ 식량 섭취 성공');
        break;
      }
    }
    if (!foodFound) {
      survivalScore--;
      log.push('❌ 식량 부족 (-1점)');
    }

    // 라디오로 소식
    if (inventory.radio || inventory.phone) {
      survivalScore++;
      log.push('✅ 생존 지식 습득 (+1점)');
    }

    // 30시간 후
    log.push('\n📍 사건 발생 30시간 후');
    // 방독면
    if (inventory.gasmask) {
      log.push('✅ 유독가스 차단 성공');
    } else {
      survivalScore--;
      log.push('❌ 유독가스 흡입 (-1점)');
    }

    // 지도 있으면 탐험 가능
    if (inventory.map) {
      log.push('✅ 지도로 탐험 - 물+식량+호루라기 획득 가능');
    }

    // 휴지
    if (inventory.tissue) {
      log.push('✅ 용변 처리 성공');
    } else {
      survivalScore--;
      log.push('❌ 용변 처리 실패 - 악취와 바이러스 (-1점)');
    }

    // 39시간 후
    log.push('\n📍 사건 발생 39시간 후');
    // 손전등
    if (inventory.flashlight) {
      log.push('✅ 손전등으로 위험 회피');
    } else {
      survivalScore--;
      log.push('❌ 어둠 속에서 위험 조우 (-1점)');
    }

    // 48시간 후
    log.push('\n📍 사건 발생 48시간 후');
    // 물
    if (inventory.water && inventory.water > 0) {
      inventory.water--;
      log.push('✅ 물 섭취 성공');
    } else {
      survivalScore--;
      log.push('❌ 물 부족 (-1점)');
    }
    
    // 식량
    foodFound = false;
    for (const food of foods) {
      if (inventory[food] && inventory[food] > 0) {
        inventory[food]--;
        foodFound = true;
        log.push('✅ 식량 섭취 성공');
        break;
      }
    }
    if (!foodFound) {
      survivalScore--;
      log.push('❌ 식량 부족 (-1점)');
    }

    // 라디오
    if (inventory.radio) {
      survivalScore++;
      log.push('✅ 구조대 소식 - 신호 준비 (+1점)');
    }

    // 56시간 후
    log.push('\n📍 사건 발생 56시간 후');
    // 물
    if (inventory.water && inventory.water > 0) {
      inventory.water--;
      log.push('✅ 물 섭취 성공');
    } else {
      survivalScore--;
      log.push('❌ 물 부족 (-1점)');
    }

    // 칼/테이프
    if (inventory.knife || inventory.tape) {
      survivalScore++;
      log.push('✅ 물건 수리 성공 (+1점)');
    }

    // 64시간 후 - 구조 신호
    log.push('\n📍 사건 발생 64시간 후 - 구조 신호');
    if (inventory.whistle) {
      survivalScore++;
      log.push('✅ 호루라기로 구조 신호 (+1점)');
    } else {
      log.push('⚪ 목소리로 외침 - 효과 없음');
    }

    // 72시간 후 - 구조 완료
    log.push('\n📍 사건 발생 72시간 후 - 구조대 도착!');
    if (inventory.photo) {
      log.push('✅ 가족사진으로 가족 찾기 성공!');
    }

    log.push(`\n최종 생존 점수: ${survivalScore}점`);

    return {
      finalScore: survivalScore,
      log: log.join('\n'),
      survived: survivalScore > 0
    };
  };

  const IntroPage = () => (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 p-8">
      <div className="max-w-4xl mx-auto">
        <div className="bg-white rounded-2xl shadow-2xl p-8 mb-6">
          <div className="flex items-center gap-4 mb-6">
            <AlertCircle className="w-12 h-12 text-red-500" />
            <h1 className="text-4xl font-bold text-gray-800">재난대비 훈련</h1>
          </div>
          
          <div className="bg-red-50 border-l-4 border-red-500 p-6 mb-6 rounded-r-lg">
            <h2 className="text-2xl font-bold text-red-900 mb-4">🚨 재난 상황 생존 시뮬레이션</h2>
            <p className="text-lg text-gray-700 leading-relaxed mb-4">
              재난이 발생했습니다. 나는 무사히 살아남았지만 탈출하지는 못했습니다.
            </p>
            <p className="text-lg text-gray-700">
              구조대가 올 때까지 72시간을 버텨야 합니다. 생존가방을 잘 준비하세요!
            </p>
          </div>

          <div className="bg-blue-50 border-l-4 border-blue-500 p-6 mb-6 rounded-r-lg">
            <h2 className="text-2xl font-bold text-blue-900 mb-4">📚 게임 규칙</h2>
            <ul className="space-y-2 text-lg text-gray-700">
              <li>• 생존 점수 8점으로 시작합니다</li>
              <li>• 가방 용량은 20칸입니다</li>
              <li>• 72시간 동안 여러 상황이 발생합니다</li>
              <li>• 필요한 물건이 없으면 점수가 감소합니다</li>
              <li>• 점수가 0점 이하가 되면 생존 실패!</li>
            </ul>
          </div>

          <button
            onClick={() => setCurrentPage('video')}
            className="w-full bg-gradient-to-r from-red-500 to-orange-500 text-white font-bold py-4 px-8 rounded-xl hover:from-red-600 hover:to-orange-600 transition-all shadow-lg hover:shadow-xl"
          >
            시작하기 →
          </button>
        </div>
      </div>
    </div>
  );

  const VideoPage = () => (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 p-4">
      <div className="max-w-6xl mx-auto">
        <div className="bg-white rounded-2xl shadow-2xl p-6 mb-4">
          <h1 className="text-3xl font-bold text-gray-800 mb-4 flex items-center gap-3">
            <Play className="w-8 h-8 text-red-500" />
            재난 대비 영상
          </h1>
          
          <p className="text-lg text-gray-700 mb-6">
            게임을 시작하기 전에 화재와 지진 대비 영상을 시청해주세요.
          </p>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
          <div className="bg-white rounded-2xl shadow-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <Flame className="w-8 h-8 text-red-500" />
              <h2 className="text-2xl font-bold text-gray-800">화재 대비</h2>
            </div>
            <div className="bg-white rounded-lg overflow-hidden shadow-lg mb-4">
              <div className="aspect-video">
                <iframe
                  width="100%"
                  height="100%"
                  src="https://www.youtube.com/embed/UNg2QyQ7fTY"
                  title="화재 대비 영상"
                  frameBorder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                  allowFullScreen
                ></iframe>
              </div>
            </div>
            <button
              onClick={() => setWatchedVideos({...watchedVideos, fire: true})}
              disabled={watchedVideos.fire}
              className={`w-full py-3 px-6 rounded-lg font-bold transition-all ${
                watchedVideos.fire
                  ? 'bg-green-100 text-green-700 cursor-not-allowed'
                  : 'bg-red-500 text-white hover:bg-red-600'
              }`}
            >
              {watchedVideos.fire ? '✓ 시청 완료' : '시청 완료 표시'}
            </button>
          </div>

          <div className="bg-white rounded-2xl shadow-xl p-6">
            <div className="flex items-center gap-3 mb-4">
              <Home className="w-8 h-8 text-orange-500" />
              <h2 className="text-2xl font-bold text-gray-800">지진 대비</h2>
            </div>
            <div className="bg-white rounded-lg overflow-hidden shadow-lg mb-4">
              <div className="aspect-video">
                <iframe
                  width="100%"
                  height="100%"
                  src="https://www.youtube.com/embed/DgjtZSGQGHQ"
                  title="지진 대비 영상"
                  frameBorder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                  allowFullScreen
                ></iframe>
              </div>
            </div>
            <button
              onClick={() => setWatchedVideos({...watchedVideos, earthquake: true})}
              disabled={watchedVideos.earthquake}
              className={`w-full py-3 px-6 rounded-lg font-bold transition-all ${
                watchedVideos.earthquake
                  ? 'bg-green-100 text-green-700 cursor-not-allowed'
                  : 'bg-orange-500 text-white hover:bg-orange-600'
              }`}
            >
              {watchedVideos.earthquake ? '✓ 시청 완료' : '시청 완료 표시'}
            </button>
          </div>
        </div>

        <div className="bg-white rounded-2xl shadow-xl p-6">
          <button
            onClick={() => setCurrentPage('game')}
            disabled={!watchedVideos.fire || !watchedVideos.earthquake}
            className="w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold py-4 px-8 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg"
          >
            {watchedVideos.fire && watchedVideos.earthquake 
              ? '생존가방 준비하기 →' 
              : '영상을 모두 시청해주세요'}
          </button>
        </div>
      </div>
    </div>
  );

  const GamePage = () => {
    const usedSpace = selectedItems.reduce((sum, item) => sum + item.size, 0);
    const remainingSpace = 20 - usedSpace;

    const groupedItems = selectedItems.reduce((acc, item) => {
      const existingItem = acc.find(i => i.id === item.id);
      if (existingItem) {
        existingItem.count++;
      } else {
        acc.push({ ...item, count: 1 });
      }
      return acc;
    }, []);

    return (
      <div className="min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 p-4">
        <div className="max-w-7xl mx-auto">
          <div className="bg-white rounded-2xl shadow-2xl p-6 mb-4">
            <h1 className="text-3xl font-bold text-gray-800 mb-4 flex items-center gap-3">
              <Package className="w-8 h-8 text-orange-500" />
              생존가방 준비하기
            </h1>
            
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
              <div className="bg-blue-100 p-4 rounded-lg">
                <div className="text-sm text-blue-600 font-semibold">사용 공간</div>
                <div className="text-3xl font-bold text-blue-900">{usedSpace} / 20</div>
              </div>
              <div className="bg-green-100 p-4 rounded-lg">
                <div className="text-sm text-green-600 font-semibold">남은 공간</div>
                <div className="text-3xl font-bold text-green-900">{remainingSpace}</div>
              </div>
              <div className="bg-purple-100 p-4 rounded-lg">
                <div className="text-sm text-purple-600 font-semibold">선택한 물건</div>
                <div className="text-3xl font-bold text-purple-900">{selectedItems.length}</div>
              </div>
            </div>

            <div className="flex gap-4 mb-6">
              <button
                onClick={() => setCurrentPage('result')}
                disabled={selectedItems.length === 0}
                className="flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold py-3 px-6 rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg"
              >
                준비 완료! 시뮬레이션 시작 →
              </button>
              <button
                onClick={() => setSelectedItems([])}
                className="flex-1 bg-gray-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-600 transition-all shadow-lg"
              >
                다시 시작
              </button>
            </div>

            <div className="bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-6 rounded-r-lg">
              <div className="flex items-start gap-2">
                <Info className="w-5 h-5 text-yellow-600 mt-1 flex-shrink-0" />
                <div className="text-sm text-yellow-800">
                  물건을 여러 번 클릭하면 여러 개를 담을 수 있습니다. 
                  72시간 동안 필요한 물건을 신중하게 선택하세요!
                </div>
              </div>
            </div>
          </div>

          <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div className="lg:col-span-2">
              <div className="bg-white rounded-2xl shadow-xl p-6">
                <h2 className="text-xl font-bold text-gray-800 mb-4">선택 가능한 물건</h2>
                <div className="grid grid-cols-2 md:grid-cols-3 gap-3 max-h-[600px] overflow-y-auto pr-2">
                  {items.map((item) => (
                    <div
                      key={item.id}
                      className="p-4 rounded-lg border-2 border-gray-300 bg-white hover:bg-gray-50 cursor-pointer transition-all hover:shadow-lg"
                      onClick={() => addItemToBag(item)}
                    >
                      <div className="flex justify-between items-start mb-2">
                        <h3 className="font-bold text-sm text-gray-800">{item.name}</h3>
                        <span className="bg-blue-500 text-white text-xs px-2 py-1 rounded-full">
                          {item.size}칸
                        </span>
                      </div>
                      <p className="text-xs text-gray-600 line-clamp-3">{item.description}</p>
                    </div>
                  ))}
                </div>
              </div>
            </div>

            <div className="lg:col-span-1">
              <div className="bg-white rounded-2xl shadow-xl p-6 sticky top-4">
                <h2 className="text-xl font-bold text-gray-800 mb-4">내 생존가방</h2>
                {selectedItems.length === 0 ? (
                  <div className="text-center py-12 text-gray-400">
                    <Package className="w-16 h-16 mx-auto mb-4 opacity-50" />
                    <p>물건을 클릭해서 가방에 담아보세요!</p>
                  </div>
                ) : (
                  <div className="space-y-2 max-h-[500px] overflow-y-auto">
                    {groupedItems.map((item) => (
                      <div
                        key={item.id}
                        className="p-3 rounded-lg bg-gray-50 border border-gray-200"
                      >
                        <div className="flex justify-between items-start mb-2">
                          <div className="flex-1">
                            <div className="font-semibold text-sm text-gray-800">{item.name}</div>
                            <div className="text-xs text-gray-500">{item.size}칸 × {item.count}개 = {item.size * item.count}칸 사용</div>
                          </div>
                          <div className="flex items-center gap-1 ml-2">
                            <button
                              onClick={() => removeOneItem(item.id)}
                              className="text-red-500 hover:text-red-700 hover:bg-red-100 p-1.5 rounded-full transition-all"
                              title="하나 빼기"
                            >
                              <svg xmlns="http://www.w3.org/2000/svg" className="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20 12H4" />
                              </svg>
                            </button>
                            <span className="text-lg font-bold text-gray-700 px-2">{item.count}</span>
                            <button
                              onClick={() => addItemToBag(item)}
                              className="text-green-500 hover:text-green-700 hover:bg-green-100 p-1.5 rounded-full transition-all"
                              title="하나 추가"
                            >
                              <svg xmlns="http://www.w3.org/2000/svg" className="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                              </svg>
                            </button>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      </div>
    );
  };

  const ResultPage = () => {
    const result = calculateSurvivalScore();
    
    const groupedItems = selectedItems.reduce((acc, item) => {
      const existingItem = acc.find(i => i.id === item.id);
      if (existingItem) {
        existingItem.count++;
      } else {
        acc.push({ ...item, count: 1 });
      }
      return acc;
    }, []);
    
    return (
      <div className="min-h-screen bg-gradient-to-br from-blue-50 to-orange-50 p-8">
        <div className="max-w-4xl mx-auto">
          <div className="bg-white rounded-2xl shadow-2xl p-8">
            <div className="text-center mb-8">
              <h1 className="text-4xl font-bold text-gray-800 mb-4">72시간 생존 결과</h1>
              <div className={`inline-block text-white text-6xl font-bold py-6 px-12 rounded-2xl shadow-lg ${
                result.survived 
                  ? 'bg-gradient-to-r from-green-500 to-emerald-500' 
                  : 'bg-gradient-to-r from-red-500 to-orange-500'
              }`}>
                {result.finalScore}점
              </div>
              <p className="mt-4 text-2xl font-bold">
                {result.survived 
                  ? '✅ 생존 성공!' 
                  : '❌ 생존 실패...'}
              </p>
            </div>

            <div className={`border-l-4 p-6 mb-8 rounded-r-xl ${
              result.survived 
                ? 'bg-green-50 border-green-500' 
                : 'bg-red-50 border-red-500'
            }`}>
              <h2 className="text-2xl font-bold mb-4">
                {result.survived ? '축하합니다!' : '아쉽습니다...'}
              </h2>
              <p className="text-lg text-gray-700">
                {result.survived 
                  ? '72시간을 무사히 버텨 구조대에게 구조되었습니다! 잘 준비된 생존가방 덕분입니다.' 
                  : '구조되기 전에 목숨이 위험해졌습니다. 생존가방을 다시 준비해보세요.'}
              </p>
            </div>

            <div className="bg-gray-50 border border-gray-300 p-6 mb-8 rounded-xl">
              <h2 className="text-xl font-bold text-gray-800 mb-4">📋 생존 시뮬레이션 로그</h2>
              <pre className="text-sm text-gray-700 whitespace-pre-wrap font-mono bg-white p-4 rounded-lg max-h-96 overflow-y-auto">
                {result.log}
              </pre>
            </div>

            <div className="mb-8">
              <h2 className="text-xl font-bold text-gray-800 mb-4">내가 선택한 물품</h2>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                {groupedItems.map((item) => (
                  <div
                    key={item.id}
                    className="p-4 rounded-lg border-2 border-gray-300 bg-gray-50"
                  >
                    <div className="flex justify-between items-start">
                      <div>
                        <h3 className="font-bold text-gray-800">
                          {item.name} {item.count > 1 && <span className="text-blue-600">× {item.count}</span>}
                        </h3>
                        <p className="text-sm text-gray-600 mt-1">{item.description}</p>
                      </div>
                      <span className="bg-blue-500 text-white text-xs px-2 py-1 rounded-full">
                        {item.size * item.count}칸
                      </span>
                    </div>
                  </div>
                ))}
              </div>
            </div>

            <div className="flex gap-4">
              <button
                onClick={() => {
                  setSelectedItems([]);
                  setCurrentPage('game');
                }}
                className="flex-1 bg-gradient-to-r from-orange-500 to-red-500 text-white font-bold py-4 px-8 rounded-xl hover:from-orange-600 hover:to-red-600 transition-all shadow-lg hover:shadow-xl"
              >
                다시 도전하기
              </button>
              <button
                onClick={() => setCurrentPage('intro')}
                className="flex-1 bg-gray-500 text-white font-bold py-4 px-8 rounded-xl hover:bg-gray-600 transition-all shadow-lg"
              >
                처음으로
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  };

  return (
    <div>
      {currentPage === 'intro' && <IntroPage />}
      {currentPage === 'video' && <VideoPage />}
      {currentPage === 'game' && <GamePage />}
      {currentPage === 'result' && <ResultPage />}
    </div>
  );
};

export default SurvivalSimulationGame;